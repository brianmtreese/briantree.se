---
layout: default
---
{% assign valid_tags = "" | split: "," %} {% for page in site.pages %} {% if page.layout == "tag" and page.tag %} {% assign valid_tags = valid_tags | push: page.tag %} {% endif %} {% endfor %}
<article class="post" itemscope itemtype="https://schema.org/BlogPosting">
  {%- if page.tags -%}
  <nav aria-label="Breadcrumb" class="breadcrumb">
    <ol itemscope itemtype="https://schema.org/BreadcrumbList">
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="{{ '/' | relative_url }}">
          <span itemprop="name">Home</span>
        </a>
        <meta itemprop="position" content="1" />
      </li>
      {%- assign tag_exists = false -%}
      {%- if page.tags[0] -%}
        {%- for valid_tag in valid_tags -%}
          {%- if valid_tag == page.tags[0] -%}
            {%- assign tag_exists = true -%}
          {%- endif -%}
        {%- endfor -%}
        {%- if tag_exists -%}
        {%- assign tagUrl = "/tags/" | append: page.tags[0] | downcase | replace: " ","-" -%}
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a itemprop="item" href="{{ tagUrl | relative_url }}">
            <span itemprop="name">{{ page.tags[0] }}</span>
          </a>
          <meta itemprop="position" content="2" />
        </li>
        {%- endif -%}
      {%- endif -%}
      <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" aria-current="page">
        <span itemprop="name">{{ page.title }}</span>
        <meta itemprop="position" content="{%- if tag_exists -%}3{%- else -%}2{%- endif -%}" />
      </li>
    </ol>
  </nav>
  {%- endif -%}
  
  {%- if page.image -%}
    <div class="featuredImage">
        <img src="{{ '/assets/img/' | append: page.image | relative_url }}" alt="{%- if page.description -%}{{ page.description | truncate: 100 }}{%- else -%}{{ page.title }}{%- endif -%}" loading="eager" fetchpriority="high" />
      </div>
  {%- endif -%}
  
  <header>
    <h1 class="postTitle" itemprop="headline">{{ page.title }}</h1>
    <p class="meta">
      <time datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">{{ page.date | date: '%B %d, %Y' }}</time>
      {%- if page.date -%}
      <meta itemprop="dateModified" content="{{ page.date | date_to_xmlschema }}" />
      {%- endif -%}
      | <span class="time">{{ page.content | number_of_words | divided_by:180 }}</span> Minute Read
      {%- if page.description or page.excerpt -%}
      <meta itemprop="description" content="{%- if page.description -%}{{ page.description | escape }}{%- else -%}{{ page.excerpt | strip_html | escape }}{%- endif -%}" />
      <meta itemprop="abstract" content="{%- if page.description -%}{{ page.description | escape }}{%- else -%}{{ page.excerpt | strip_html | escape }}{%- endif -%}" />
      {%- endif -%}
    </p>
  </header>

  <section itemprop="articleBody">
    {{ content }}
  </section>

  {%- include social-share.html -%}

  {%- if page.tags -%}
    <section class="tags" aria-label="Article tags">
      <meta itemprop="keywords" content="{{ page.tags | join: ', ' }}" />
      {%- for tag in page.tags -%}
        {%- assign tag_exists = false -%}
        {%- for valid_tag in valid_tags -%}
          {%- if valid_tag == tag -%}
            {%- assign tag_exists = true -%}
          {%- endif -%}
        {%- endfor -%}
        {%- if tag_exists -%}
          {%- assign tagUrl = "/tags/" | append: tag | downcase -%}
          <a rel="noopener follow" href="{{ tagUrl | replace: " ","-" | relative_url }}">{{ tag }}</a>
        {%- else -%}
          <span>{{ tag }}</span>
        {%- endif -%}
      {%- endfor -%}
    </section>
  {%- endif -%}

  <!-- RELATED POSTS -->
  {%- if page.tags -%}
    {%- assign related_posts = "" | split: "," -%}
    {%- assign related_scores = "" | split: "," -%}
    {%- assign page_is_dom_show = false -%}
    {%- if page.tags contains "The DOM COM Show" -%}
      {%- assign page_is_dom_show = true -%}
    {%- endif -%}
    
    {%- for post in site.posts -%}
      {%- unless post.url == page.url -%}
        {%- assign is_dom_show_post = false -%}
        {%- if post.tags contains "The DOM COM Show" -%}
          {%- assign is_dom_show_post = true -%}
        {%- endif -%}
        
        {%- if is_dom_show_post == page_is_dom_show -%}
          {%- assign score = 0 -%}
          {%- for tag in page.tags -%}
            {%- if post.tags contains tag -%}
              {%- assign score = score | plus: 1 -%}
            {%- endif -%}
          {%- endfor -%}
          
          {%- if score > 0 -%}
            {%- assign related_posts = related_posts | push: post -%}
            {%- assign related_scores = related_scores | push: score -%}
          {%- endif -%}
        {%- endif -%}
      {%- endunless -%}
    {%- endfor -%}
    
    {%- if related_posts.size > 0 -%}
      {%- assign sorted_related = "" | split: "," -%}
      {%- assign max_tags = page.tags.size -%}
      
      {%- for tag_count in (1..max_tags) reversed -%}
        {%- for i in (0..related_posts.size) -%}
          {%- if i < related_posts.size -%}
            {%- assign current_score = related_scores[i] | plus: 0 -%}
            {%- assign post_already_added = false -%}
            {%- for added_post in sorted_related -%}
              {%- if added_post.url == related_posts[i].url -%}
                {%- assign post_already_added = true -%}
              {%- endif -%}
            {%- endfor -%}
            {%- if current_score == tag_count and post_already_added == false and sorted_related.size < 3 -%}
              {%- assign sorted_related = sorted_related | push: related_posts[i] -%}
            {%- endif -%}
          {%- endif -%}
        {%- endfor -%}
      {%- endfor -%}
      
      {%- if sorted_related.size > 0 -%}
        <section class="relatedPosts" aria-label="Related articles">
          <h2 class="relatedPosts-title">Related Posts</h2>
          <div class="relatedPosts-grid">
            {%- for related_post in sorted_related -%}
              <article class="relatedPost">
                <a href="{{ related_post.url | relative_url }}" class="relatedPost-link">
                  {%- if related_post.video_id and related_post.video_id != "" -%}
                    <div class="relatedPost-image">
                      <img src="https://img.youtube.com/vi/{{ related_post.video_id }}/maxresdefault.jpg" alt="{{ related_post.title }}" loading="lazy" />
                    </div>
                  {%- elsif related_post.image -%}
                    <div class="relatedPost-image">
                      <img src="{{ '/assets/img/' | append: related_post.image | relative_url }}" alt="{{ related_post.title }}" loading="lazy" />
                    </div>
                  {%- endif -%}
                  <div class="relatedPost-content">
                    <h3 class="relatedPost-title">{{ related_post.title }}</h3>
                    <p class="relatedPost-excerpt">
                      {%- if related_post.description -%}
                        {{ related_post.description | truncate: 120 }}
                      {%- else -%}
                        {{ related_post.excerpt | strip_html | truncate: 120 }}
                      {%- endif -%}
                    </p>
                    <time class="relatedPost-date">{{ related_post.date | date: '%B %d, %Y' }}</time>
                  </div>
                </a>
              </article>
            {%- endfor -%}
          </div>
        </section>
      {%- endif -%}
    {%- endif -%}
  {%- endif -%}

  <!-- POST NAVIGATION -->
  <footer class="postNav clearfix">
    {%- if page.tags contains "The DOM COM Show" -%}
      {%- assign prev_post = null -%}
      {%- assign next_post = null -%}
      {%- assign closest_prev_date = '1970-01-01' | date: '%s' | minus: 0 -%}
      {%- assign closest_next_date = '9999-12-31' | date: '%s' | minus: 0 -%}
      
      {%- for post in site.posts -%}
        {%- if post.tags contains "The DOM COM Show" -%}
          {%- if post.date < page.date -%}
            {%- assign post_date_seconds = post.date | date: '%s' | minus: 0 -%}
            {%- if post_date_seconds > closest_prev_date -%}
              {%- assign closest_prev_date = post_date_seconds -%}
              {%- assign prev_post = post -%}
            {%- endif -%}
          {%- endif -%}
          {%- if post.date > page.date -%}
            {%- assign post_date_seconds = post.date | date: '%s' | minus: 0 -%}
            {%- if post_date_seconds < closest_next_date -%}
              {%- assign closest_next_date = post_date_seconds -%}
              {%- assign next_post = post -%}
            {%- endif -%}
          {%- endif -%}
        {%- endif -%}
      {%- endfor -%}

      {%- if prev_post -%}
        <a class="prev{% if prev_post.image %} image{% endif %}" href="{{ prev_post.url | relative_url }}"><span>&laquo;&nbsp;{{ prev_post.title }}</span>
        {%- if prev_post.image -%}
          <img src="{{ '/assets/img/' | append: prev_post.image | relative_url }}" alt="{{ prev_post.title }}" loading="lazy">
        {%- endif -%}
        </a>
      {%- endif -%}
      {%- if next_post -%}
        <a class="next{% if next_post.image %} image{% endif %}" href="{{ next_post.url | relative_url }}"><span>{{ next_post.title }}&nbsp;&raquo;</span>
        {%- if next_post.image -%}
          <img src="{{ '/assets/img/' | append: next_post.image | relative_url }}" alt="{{ next_post.title }}" loading="lazy">
        {%- endif -%}
        </a>
      {%- endif -%}
    {%- else -%}
      {%- assign prev_post = null -%}
      {%- assign next_post = null -%}
      
      {%- for post in site.posts -%}
        {%- unless post.tags contains "The DOM COM Show" -%}
          {%- if post.date < page.date and prev_post == null -%}
            {%- assign prev_post = post -%}
          {%- endif -%}
          {%- if post.date > page.date and next_post == null -%}
            {%- assign next_post = post -%}
          {%- endif -%}
        {%- endunless -%}
      {%- endfor -%}

      {%- if prev_post -%}
        <a class="prev{% if prev_post.image %} image{% endif %}" href="{{ prev_post.url | relative_url }}"><span>&laquo;&nbsp;{{ prev_post.title }}</span>
        {%- if prev_post.image -%}
          <img src="{{ '/assets/img/' | append: prev_post.image | relative_url }}" alt="{{ prev_post.title }}" loading="lazy">
        {%- endif -%}
        </a>
      {%- endif -%}
      {%- if next_post -%}
        <a class="next{% if next_post.image %} image{% endif %}" href="{{ next_post.url | relative_url }}"><span>{{ next_post.title }}&nbsp;&raquo;</span>
        {%- if next_post.image -%}
          <img src="{{ '/assets/img/' | append: next_post.image | relative_url }}" alt="{{ next_post.title }}" loading="lazy">
        {%- endif -%}
        </a>
      {%- endif -%}
    {%- endif -%}
  </footer>
</article>

{%- if site.disqus.shortname -%}
  {%- include disqus_comments.html -%}
{%- endif -%}
